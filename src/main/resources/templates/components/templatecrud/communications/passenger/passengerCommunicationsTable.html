<div th:fragment="passengerTable" class="d-block" xmlns:th="http://www.w3.org/1999/xhtml" data-hideable="hiddeable" data-tab="communicationsTab">
    <h2 th:text="#{templateCRUD.transportsForPassengerTableTitle}" class="mt-2 mb-4"></h2>

    <table class="table table-striped table-bordered shadow-lg" id="passengerCommunicationsTable" width="100%" cellspacing="0">
        <thead class="bg-light">
        <!-- Event Name row -->
        <tr>
            <th></th>
            <th th:each="date: ${templateDates}"
                th:text="${date.eventName}"
                class="text-nowrap"></th>
        </tr>
        <!-- Event Name row -->

        <!-- Days of the week row -->
        <tr>
            <th></th>
            <th th:each="date: ${templateDates}"
                th:data-date="${date.transportDate}"
                th:data-date-id="${date.id}"
                th:text="${#messages.msgOrNull(date.dayOfTheWeekName) + ' ' + date.transportDate.toString().substring(8)}"
                class="text-nowrap"
            ></th>
        </tr>
        <!-- Days of the week row -->
        </thead>
        <tbody>
        <tr th:each="passenger : ${passengersFromTemplateList}" th:data-passenger:="${passenger.id}" th:id="'passenger_row_' + ${passenger.id}">
            <!-- Driver Name cell -->
            <td
                    th:id="${passenger.id} + '_th'"
                    th:data-passenger-id="${passenger.id}"
                    class="text-nowrap text-left"
                    style="cursor:move"
            >
                <div class="row mt-1">
                    <div class="col">
                        <span th:text="${passenger.name} + ' ' + ${passenger.surname}"></span>
                    </div>
                </div>
            </td>
            <!-- Driver Name cell -->

            <!-- Driver Data -->
            <td th:each="date : ${templateDates}"
                th:data-date-id="${date.id}"
                th:id="'d' + ${passenger.id} + 't' + ${date.id} + '_date_td'"
                th:class="'text-nowrap' + ${(date.dateType != 'transportDate') ? ' text-center' : ''}"
            >
                <!-- Event display -->
                <span th:if="${(date.dateType == 'event')}" class="text-danger">------------</span>

                <!-- Transport Date display -->
                <div th:unless="${'event' == date.dateType}" class="d-flex flex-column">
                    <!-- Driver name -->
                    <span th:text="${(passengerCommunicationsMap.get(passenger.id) != null) ? passengerCommunicationsMap.get(passenger.id).get(date.id) : ''}"></span>
                </div>
                <!-- Transport Date display -->
            </td>
        </tr>
        </tbody>
    </table>
</div>